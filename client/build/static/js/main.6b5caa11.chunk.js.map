{"version":3,"sources":["utils.js","Components/Login.jsx","App.js","Components/Post.jsx","Components/Nav.jsx","Components/ChatWindow.jsx","Components/Home.jsx","index.js","Reducers/likeReducer.js","Reducers/isLoggedReducer.js","Reducers/userReducer.js","Reducers/allReducers.js"],"names":["loginCompleted","data","url","window","location","href","localStorage","token","login","GET_TOKEN","gql","GET_POSTS","ADD_COMMENT","Center","styled","div","Login","useState","username","setUsername","password","setPassword","error","setError","useLazyQuery","onCompleted","onError","getToken","onChange","e","target","value","type","placeholder","onClick","variables","userName","App","MyDiv","Post","props","Comments","comments","setComments","comment","setComment","useMutation","addComment","src","photoPath","alt","style","width","padding","user","caption","map","i","key","User","postId","id","Nav","socket","io","path","Position","MyBox","ChatWindow","useSelector","state","userReducer","message","name","setState","chat","setChat","useEffect","on","className","index","onTextChange","variant","label","emit","Home","useQuery","loading","JSON","parse","post","allPosts","ele","likeReducer","action","isLoggedReducer","allReducers","combineReducers","store","createStore","composeWithDevTools","httpLink","createHttpLink","uri","authLink","setContext","_","headers","getItem","authorization","client","ApolloClient","link","concat","cache","InMemoryCache","ReactDOM","render","exact","document","getElementById"],"mappings":"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","file":"static/js/main.6b5caa11.chunk.js","sourcesContent":["import {  gql } from '@apollo/client';\n\nexport const loginCompleted = (data) =>{\n  let url\n  process.env.NODE_ENV===\"development\" ? url=\"/home\" : url=\"/home\"\n\n  window.location.href = url\n  localStorage.token = data.login.token\n}\n\nexport const GET_TOKEN = gql`\nquery Token($userName: String!, $password: String!){\n  login(userName: $userName, password: $password){\n    token\n    id\n  }\n}`\n\nexport const GET_POSTS = gql`\n  { post\n    {\n      allPosts\n    }\n  }`\n\n  export const ADD_COMMENT = gql`\n  mutation Comment($postId: Int!, $comment: String!){\n    addComment(postId: $postId, comment:$comment) {\n      id\n    }\n    }`","import React, { useState} from 'react'\nimport {GET_TOKEN, loginCompleted} from \"../utils\"\nimport styled from \"styled-components\"\nimport { useLazyQuery } from '@apollo/client'\n\nconst Center = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  min-height: 100vh;`\n\nexport default function Login() {\n  const [username, setUsername] = useState(null)\n  const [password, setPassword] = useState(null)\n  const [error, setError] = useState(null)\n\n  const [getToken] = useLazyQuery(GET_TOKEN, {\n    onCompleted: loginCompleted,\n    onError: (data) => setError(\"Invalid Credentials\")\n  })\n\n  return (\n    <Center>\n      { error ? <p> {error} </p> : null }\n      <input onChange={e=>setUsername(e.target.value)} type=\"text\" placeholder=\"username\" />\n      <input onChange={e=>setPassword(e.target.value)} type=\"text\" placeholder=\"password\" />\n      <input type=\"button\" value=\"Login\" onClick={ () => { getToken({ variables: {userName:username, password:password}})}}/>\n    </Center>\n  );\n}\n\n\n","import React from 'react'\nimport Login from './Components/Login'\n\nexport default function App() {\n\n  return (\n    <>\n      <Login/>\n    </>\n  )\n}\n\n","import React, {  useState } from 'react'\nimport { useMutation } from '@apollo/client';\nimport styled from 'styled-components'\nimport { ADD_COMMENT } from \"../utils\"\n\nconst MyDiv = styled.div`\n  font-size: 11px;   \n  color: rgb(38,38,38);\n  width: 555px;  \n  border:solid grey 1px;  \n  background-color: rgb(243,243,243);\n  outline-width: 0;`\n\nexport default function Post (props) {\n\n  const [comments, setComments] = useState(props.value.Comments)\n  const [comment, setComment] = useState(null)\n  const [addComment] = useMutation(ADD_COMMENT)\n\n    return (  \n      <MyDiv>                                                     \n        <img src={ props.value.photoPath } alt=\"\" style={{width: \"550px\", padding:\"1px 1px\"}} />\n        <p> { `${props.value.user.userName}: ${props.value.caption}`} </p>\n        <p> { comments[0] ? \"Comments:\":null} </p>\n        <div> { comments[0] ?\n          comments.map( (comments,i) => <p key={i}> {`${ comments.User.userName }:${ comments.comment }`} </p>)                \n        : null } </div>\n        <input onChange={ e => setComment( e.target.value ) } type=\"text\" placeholder=\"comment\" style={{width: \"400px\"}}/>\n        <input type=\"button\" value=\"Comment\" onClick={ () => {           \n            addComment({ variables: {postId:props.value.id, comment:comment}})\n            setComments( [ ...comments, {User: {userName:\"deepak\"} , comment:comment } ] )\n\n          }}         \n          style={{width: \"100px\"}} />                                                                 \n      </MyDiv>\n    )\n}","import React from 'react'\nimport styled from 'styled-components'\n\nconst MyDiv = styled.div`\n// padding-bottom:400px;\noverflow: hidden;\nwidth:100%;\nposition: fixed;\nmargin: -9px -8px;\nwidth:100vw;\ndisplay:flex;\njustify-content: \nspace-between;\nfont-size: 11px;   \ncolor: rgb(38,38,38);\nborder:solid grey 1px;  \nbackground-color: rgb(243,243,243);\nleft:9px;   \n-width: 0;`\n\nexport default function Nav (props) {\n    return (  \n      <MyDiv>\n      <h1 style={{\"paddingLeft\":\"100px\"}}>Logo</h1> \n      <h1 style={{\"paddingRight\":\"100px\"}}>Links</h1> \n      </MyDiv>\n        )\n        }                                              ","import React, { useState, useEffect } from 'react'\nimport io from 'socket.io-client'\nimport styled from 'styled-components'\nimport {Button, Input as input} from 'antd'\nimport {useSelector} from 'react-redux'\n// import TextField from '@material-ui/core/TextField'\nlet url\nprocess.env.NODE_ENV===\"development\" ? url=\"http://localhost:6777\" : url=\"https://solo-react-project.herokuapp.com/\"\n\nconst socket = io(url, {path: \"/ws\"})\n\nconst Position = styled.div`\n  position: fixed;\n  bottom: 5px;\n  right: 5px;`\n\nconst MyBox = styled.div`\n  font-size: 11px;  \n  height: 111px;  \n  color: rgb(38,38,38);\n  width: 255px;  \n  border:solid grey 1px;  \n  background-color: rgb(243,243,243);\n  left:9px;  \n  top: -8px;  \n  outline-width: 0;\n  overflow-y:auto;`\n\nexport default function ChatWindow() {\n  // const like = useSelector(state => state.likeReducer)\n  const username = useSelector(state => state.userReducer.username)\n\n  const [state, setState] = useState({ message: '', name: '' })\n  const [chat, setChat] = useState([])\n\n  useEffect(() => {\n    socket.on('message', ({ name, message }) => {\n      setChat([...chat, { name, message }])\n    })\n  })\n\n  const onTextChange = e => { setState({ ...state, [e.target.name]: e.target.value }) }\n\n  const sendMessage = e => {\n    const { name, message } = state\n    socket.emit('message', { name, message })\n    setState({ message: '', name })\n  }\n\n  const renderChat = () => {\n    return chat.map(({ name, message }, index) => (\n      <div key={index} >\n        <h3> {username}: <span>{message}</span> </h3>\n      </div>\n    ))\n  }\n\n  return (\n    <Position> \n      <MyBox className=\"render-chat\">{renderChat()}</MyBox>\n      <input name=\"message\" onChange={ e => onTextChange(e) } value={state.message} id=\"outlined-multiline-static\" variant=\"outlined\" label=\"Message\" />\n      <Button onClick={sendMessage} style={{width:\"92px\"}}> Send </Button>\n    </Position>\n  )\n}\n\n\n\n\n\n","import React from 'react'\nimport { useQuery } from '@apollo/client';\nimport styled from 'styled-components'\nimport {GET_POSTS} from \"../utils\"\nimport Post from \"./Post\"\nimport Nav from \"./Nav\"\nimport ChatWindow from \"./ChatWindow\"\n\nconst Center = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  min-height: 100vh;`\n\nexport default function Home () {\n\n  const { loading, error, data } = useQuery(GET_POSTS)\n    if (loading) return <p>Loading...</p>\n    if (error) return <p>Error :</p>\n    return (\n      <>\n      <Nav/>\n      <Center>\n        {\n          JSON.parse(data.post.allPosts)\n            .map((ele,i)=> <Post key={i} value={ele}/> )\n        } \n      </Center>\n      <ChatWindow/>\n      </>\n    )\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router,  Switch,  Route} from \"react-router-dom\";\nimport App from './App';\nimport Home from './Components/Home';\n\n\nimport {createStore} from 'redux'\nimport allReducers from \"./Reducers/allReducers\"\nimport { composeWithDevTools } from 'redux-devtools-extension'\nimport {Provider} from \"react-redux\"\n\nimport { createHttpLink,  ApolloClient, InMemoryCache, ApolloProvider } from '@apollo/client';\nimport { setContext } from '@apollo/client/link/context';\n//GLOBAL STORE\nconst store = createStore(allReducers, composeWithDevTools())\n\nlet url\nprocess.env.NODE_ENV===\"development\"? url=\"http://localhost:6777/gql\" : url=\"https://solo-react-project.herokuapp.com/gql\"\n\nconst httpLink = createHttpLink({\n  uri: url,\n});\n\n\nconst authLink = setContext((_, { headers }) => {\n  // get the authentication token from local storage if it exists\n  const token = localStorage.getItem('token');\n  // return the headers to the context so httpLink can read them\n  return {\n    headers: {\n      ...headers,\n      authorization: token ? `Bearer ${token}` : \"\",\n    }\n  }\n});\n\nconst client = new ApolloClient({\n  link: authLink.concat(httpLink),\n  cache: new InMemoryCache()\n})\n\n\nReactDOM.render(\n  <Provider store={store}>\n    <ApolloProvider client={client}>\n      <Router>\n        <Switch>\n          <Route exact path=\"/\"> <App/> </Route>\n          <Route exact path=\"/home\"> <Home/> </Route>\n        </Switch>\n      </Router>\n    </ApolloProvider>\n  </Provider>,\n   \n  document.getElementById('root')\n)\n","const likeReducer = (state=0, action) => {\n  switch(action.type){\n    case 'LIKE_INCREMENT': return state++\n    case 'LIKE_DECREMENT': return state--\n    default: return state\n  }\n}\n\nexport default likeReducer","const isLoggedReducer = (state=false, action) => {\n  switch(action.type){\n    case 'SIGN_IN': return !state\n    default: return state\n  }\n}\n\nexport default isLoggedReducer","const userReducer = (state={username:\"deepak\"}, action) => {\n  switch(action.type){\n    case 'LIKE_INCREMENT': return state\n    case 'LIKE_DECREMENT': return state\n    default: return state\n  }\n}\n\nexport default userReducer","import likeReducer from \"./likeReducer\"\nimport isLoggedReducer from \"./isLoggedReducer\"\nimport userReducer from \"./userReducer\"\nimport {combineReducers} from \"redux\"\n\n const allReducers = combineReducers({\n  likeReducer,\n  isLoggedReducer,\n  userReducer\n})\n\nexport default allReducers"],"sourceRoot":""}